@inherits MarkdownBase

<div class="app-panel-right col-right flex-1 float-left">
    <!-- #region Header -->
    <div class="container clearfix">
        <div class="col-10 float-left p-2 pl-4 app-panel-right-header-left d-flex">
            @if (Data.SelectedPage != null)
            {
                <div class="mr-saved @(Data.SelectedPage == null ? "d-none" : "d-flex flex-items-baseline")">
                    <div>NOTE</div>
                    <div class="ml-2 mr-2 app-input-arrow">→</div>
                    <div>
                        <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" @bind-value="@InputBookValue" @bind-value:event="onchange"
                               class="app-input" id="inputBook">
                    </div>
                    <div class="ml-1 mr-2 app-input-arrow">→</div>
                    <div>
                        <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" @bind-value="@InputPageValue" @bind-value:event="onchange"
                               class="app-input" id="inputPage">
                    </div>
                    @*<div>*@
                        @if (Data.SelectedPage.Saved)
                        {
                            <div class="btn-octicon  app-octicon-saved app-octicon-last tooltipped tooltipped-s"
                               type="button" aria-label="Saved" aria-disabled="true">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                                    <path fill-rule="evenodd"
                                          d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                                    </path>
                                </svg>
                            </div>
                        }
                        else
                        {
                            <div class="btn-octicon  app-octicon-error app-octicon-last tooltipped tooltipped-s"
                               type="button" aria-label="Not saved" aria-disabled="true">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                                    <path fill-rule="evenodd"
                                          d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z">
                                    </path>
                                </svg>
                            </div>
                        }
                    @*</div>*@
                </div>

                
            }
        </div>
        <div class=" col-2 float-left p-2 app-panel-right-header-right">

            @if (Data.Settings.IsMarkdownPreviewEnabled && Data.SelectedPage != null)
            {
                <a @onclick="@SetScrollAlligmentToggle"
                   class="btn-octicon app-octicon-right app-octicon app-octicon-hover tooltipped tooltipped-w @( Data.Settings.IsScrollAlligmentEnabled ? "app-octicon-enabled" : "" )"
                   type="button" aria-label="Align scroll" aria-disabled="true">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path fill-rule="evenodd"
                              d="M8.75 1.75a.75.75 0 00-1.5 0v.5a.75.75 0 001.5 0v-.5zM8 4a.75.75 0 01.75.75v.5a.75.75 0 01-1.5 0v-.5A.75.75 0 018 4zm.75 3.75a.75.75 0 00-1.5 0v.5a.75.75 0 001.5 0v-.5zM8 10a.75.75 0 01.75.75v.5a.75.75 0 01-1.5 0v-.5A.75.75 0 018 10zm0 3a.75.75 0 01.75.75v.5a.75.75 0 01-1.5 0v-.5A.75.75 0 018 13zm7.547-9.939A.75.75 0 0116 3.75v8.5a.75.75 0 01-1.265.545l-4.5-4.25a.75.75 0 010-1.09l4.5-4.25a.75.75 0 01.812-.144zM11.842 8l2.658 2.51V5.49L11.842 8zM0 12.25a.75.75 0 001.265.545l4.5-4.25a.75.75 0 000-1.09l-4.5-4.25A.75.75 0 000 3.75v8.5zm1.5-6.76L4.158 8 1.5 10.51V5.49z">
                        </path>
                    </svg>
                </a>
            }

            @if (Data.SelectedPage != null)
            {
                <a @onclick="@SetMarkdownPreviewToggle"
                   class="btn-octicon app-octicon-right app-octicon app-octicon-hover tooltipped tooltipped-w @( Data.Settings.IsMarkdownPreviewEnabled ? "app-octicon-enabled" : ""  )"
                   type="button"
                   aria-label="@( Data.Settings.IsMarkdownPreviewEnabled ? "Hide markdown preview" : "Show markdown preview"  )"
                   aria-disabled="true">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path fill-rule="evenodd"
                              d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z">
                        </path>
                    </svg>
                </a>
            }

            <a @onclick="@SetDarkModeToggle"
               class="btn-octicon app-octicon-right app-octicon-right-last app-octicon app-octicon-hover tooltipped tooltipped-w @( Data.Settings.IsDarkModeEnabled ? "svg-bulb-light" : "svg-bulb-dark"  ) ml-1 mr-2"
               type="button" aria-label="@( Data.Settings.IsDarkModeEnabled ? "Light mode" : "Dark mode"  )"
               aria-disabled="true">
                @if (Data.Settings.IsDarkModeEnabled)
                {
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path fill-rule="evenodd"
                              d="M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z">
                        </path>
                    </svg>
                }
                else
                {
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path fill-rule="evenodd"
                              d="M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z">
                        </path>
                    </svg>
                }
            </a>
        </div>
    </div>
    <!-- #endregion -->
    <!-- #region Markdown -->

    @if (Data.SelectedPage != null)
    {
        <div class="container clearfix app-text-container pb-3 @(Data.SelectedPage == null ? "d-none" : "")">
            <div class="@( Data.Settings.IsMarkdownPreviewEnabled ? "col-6" : "col-12"  ) float-left pl-textarea app-textarea-container overflow-hidden pr-1">

                <textarea autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="div_editor" @bind-value="@TextareaValue" @bind-value:event="oninput"
                          class="app-textarea pb-4 syncscroll" name="scrollElement"></textarea>

            </div>

            <div class="@( Data.Settings.IsMarkdownPreviewEnabled ? "col-6 anim-fade-in" : "d-none  anim-fade-in"  ) float-left pl-textarea app-textarea-container pr-4 pb-4 syncscroll"
                 name="scrollElement">
                <div id="div_markdown" class="markdown-body">
                    @*@MarkdownValue*@
                </div>
            </div>
        </div>
    }

    <!-- #endregion -->
</div>
